{"openapi":"3.1.0","info":{"title":"OpenAPI definition","version":"v0"},"servers":[{"url":"http://localhost:8080","description":"Generated server url"}],"tags":[{"name":"Dynamic Rule Controller","description":"API для управления динамическими правилами рекомендаций"},{"name":"Recommendation Controller","description":"API для получения персонализированных рекомендаций"}],"paths":{"/rule":{"get":{"tags":["Dynamic Rule Controller"],"summary":"Получить список всех правил","description":"Возвращает полный перечень всех активных правил генерации рекомендаций.","operationId":"getListingRules","responses":{"200":{"description":"Успешный запрос","content":{"*/*":{"schema":{"$ref":"#/components/schemas/ListingRules"}}}}}},"post":{"tags":["Dynamic Rule Controller"],"summary":"Добавить новое правило","description":"Создает и добавляет новое правило для генерации рекомендаций в систему.","operationId":"addRules","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/DynamicRule"}}},"required":true},"responses":{"200":{"description":"Правило успешно создано","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DynamicRule"}}}},"400":{"description":"Неверные данные запроса","content":{"*/*":{"schema":{"$ref":"#/components/schemas/DynamicRule"}}}}}}},"/recommendation/{userId}":{"get":{"tags":["Recommendation Controller"],"summary":"Получить рекомендации для пользователя","description":"Возвращает персонализированный список финансовых продуктов для указанного пользователя.","operationId":"getRecommendationList","parameters":[{"name":"userId","in":"path","description":"UUID пользователя","required":true,"schema":{"type":"string"},"example":"123e4567-e89b-12d3-a456-426614174000"}],"responses":{"200":{"description":"Успешный запрос","content":{"*/*":{"schema":{"$ref":"#/components/schemas/RecommendationServiceResult"}}}}}}},"/rule/{recommendationUuid}":{"delete":{"tags":["Dynamic Rule Controller"],"summary":"Удалить правило по ID","description":"Удаляет правило генерации рекомендаций по его уникальному идентификатору.","operationId":"deleteRule","parameters":[{"name":"recommendationUuid","in":"path","description":"UUID правила для удаления","required":true,"schema":{"type":"string"},"example":"a1b2c3d4-e5f6-7890-abcd-ef1234567890"}],"responses":{"200":{"description":"Правило успешно удалено"},"404":{"description":"Правило не найдено"}}}}},"components":{"schemas":{"DynamicRule":{"type":"object","description":"Динамическое правило для генерации рекомендаций","properties":{"id":{"type":"string","format":"uuid","description":"Уникальный идентификатор правила","example":"a1b2c3d4-e5f6-7890-abcd-ef1234567890","readOnly":true},"product_name":{"type":"string","description":"Название финансового продукта","example":"Ипотека 'Молодая семья'"},"product_id":{"type":"string","format":"uuid","description":"UUID рекомендуемого продукта","example":"f56b9e7e-eb9a-4f27-9c3a-910a2bb8f7f1"},"product_text":{"type":"string","description":"Описание продукта","example":"Специальная программа ипотечного кредитования для молодых семей."},"rule":{"type":"array","description":"Список условий правила","items":{"$ref":"#/components/schemas/QueryType"}}},"required":["product_id","product_name","rule"]},"QueryType":{"type":"object","description":"Элемент условия внутри правила рекомендаций","properties":{"query":{"type":"string","description":"Тип запроса/условия","example":"USER_OF"},"arguments":{"type":"array","description":"Аргументы для запроса","example":["DEBIT","CREDIT"],"items":{"type":"string"}},"negate":{"type":"boolean","description":"Флаг инверсии условия","example":false}},"required":["query"]},"ListingRules":{"type":"object","description":"Список всех динамических правил","properties":{"data":{"type":"array","description":"Массив правил рекомендаций","items":{"$ref":"#/components/schemas/DynamicRule"}}}},"Recommendation":{"type":"object","properties":{"name":{"type":"string","description":"Название финансового продукта","example":"Вклад 'Копилка'"},"id":{"type":"string","format":"uuid","description":"Уникальный идентификатор рекомендации","example":"59efc529-2fff-41af-baff-90ccd7402925"},"text":{"type":"string","description":"Детальное описание предложения и его условий","example":"Откройте свою собственную «Копилку» с нашим банком! «Копилка» — это уникальный банковский инструмент, который поможет вам легко и удобно накапливать деньги на важные цели."}}},"RecommendationServiceResult":{"type":"object","description":"Результат запроса рекомендаций для пользователя","properties":{"user_id":{"type":"string","format":"uuid","description":"UUID пользователя","example":"123e4567-e89b-12d3-a456-426614174000"},"recommendations":{"type":"array","description":"Список рекомендаций для пользователя","items":{"$ref":"#/components/schemas/Recommendation"}}}}}}}